!function(t){var e=function(e,s){this.$el=e,this.options=t.extend({},t.fn.yearselect.defaults,s),this.start=this.options.start||this.start,this.end=this.options.end||this.end,this.step=this.options.step||this.step,this.order=this.options.order||this.order,this.selected="current"!==this.options.selected||this.$el.data("selected")||this.selected,this.displayAsValue=this.options.displayAsValue||this.$el.data("display-as-value")||this.displayAsValue,this.years=[],this.init()};e.prototype={constructor:e,init:function(){order=this.order.toLowerCase(),"desc"==order&&(this.start=this.options.end,this.end=this.options.start),this.destroy(),this.render(order)},render:function(t){"asc"==(t=t.toLowerCase())?this.renderAscending():"desc"==t&&this.renderDescending()},renderAscending:function(){for(var t=this.start;t<=this.end;t+=this.step)this.years.push(t),this.renderDisplay(t)},renderDescending:function(){for(var t=this.start;t>=this.end;t-=this.step)this.years.push(t),this.renderDisplay(t)},renderDisplay:function(e){var s=this.formatDisplay(e),i=this.displayAsValue?s:e,a=(new Date).getFullYear(),r=t("<option>").html(s).val(i);this.$el.append(r),(e==this.selected||"current"==this.selected&&e===a)&&this.setSelected(i)},formatDisplay:function(t){return"function"==typeof this.options.formatDisplay?this.options.formatDisplay(t):t},setSelected:function(t){this.$el.val(t)},destroy:function(){this.years=[],this.$el.html("")}},t.fn.yearselect=function(s){return this.each(function(){var i=t(this);if(!i.is("select")){var a={name:i.attr("name")||i.data("name")||"",class:i.attr("class")||i.data("class")||"",id:i.attr("id")||i.data("id")||"",selected:i.attr("value")||i.data("selected")||""};i=t('<select class="yearselect"></select>').attr("name",a.name).attr("class",a.class).attr("id",a.id).data("selected",a.selected),t(this).replaceWith(i)}new e(i,s)})},t.fn.yearselect.defaults={start:1970,end:(new Date).getFullYear(),step:1,order:"asc",selected:"current",formatDisplay:null,displayAsValue:!0}}(jQuery);